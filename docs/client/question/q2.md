# 2、使用axios或jquery等工具访问云函数方式(云函数url化外部访问)
 
* 1、必须开启云函数的URL化，假如URL地址为：https://xxx.bspapp.com/http/router

开启URL化方法为：打开 `router/package.json` 文件，在 `path` 里填写 `http/router`，最后重新上传云函数。

```js
cloudfunction-config": {
  "concurrency": 1,
  "memorySize": 256,
  "path": "/http/router",
  "timeout": 60,
  "triggers": [],
  "runtime": "Nodejs12"
}
```

## axios请求示例

axios 方式1

```js
axios.post('https://xxx.bspapp.com/http/router', {
  "$url":"user/pub/login",
  "data":{
    a:1,
    b:"2"
  }
})
.then(function (res) {
  console.log(res);
})
.catch(function (err) {
  console.log(err);
});
```

带token的示例

```js
axios.post('https://xxx.bspapp.com/http/router', {
  "uni_id_token":"用户token",  
  "$url":"user/pub/login",
  "data":{
    a:1,
    b:"2"
  }
})
.then(function (res) {
  console.log(res);
})
.catch(function (err) {
  console.log(err);
});

```

axios 方式2

```js
axios.post('https://xxx.bspapp.com/http/router/user/pub/login', {
  a:1,
  b:"2"
})
.then(function (res) {
  console.log(res);
})
.catch(function (err) {
  console.log(err);
});
```

带token的示例

```js
axios.post('https://xxx.bspapp.com/http/router/user/pub/login', {
  uni_id_token: "用户token",  
  a:1,
  b:"2"
})
.then(function (res) {
  console.log(res);
})
.catch(function (err) {
  console.log(err);
});

```

## jquery ajax请求示例

jquery 方式1

```js
$.ajax({
  type: 'POST',
  url: "https://xxxxxx.com/http/router",
  data:JSON.stringify({
    action: "template/test/pub/test",
    data: {
      a:1,
      b:"2"
    }
  }),
  success:function(data){
    console.log("data", data);
  }
})
```

带token的示例

```js
$.ajax({
  type: 'POST',
  url: "https://xxxxxx.com/http/router",
  data:JSON.stringify({
    "uni_id_token": "用户token",  
    "$url": "template/test/pub/test",
    "data": {
      a:1,
      b:"2"
    }
  }),
  success:function(data){
    console.log("data", data);
  }
})

```

jquery 方式2

```js
$.ajax({
  type: 'POST',
  url: "https://xxxxxx.com/http/router/template/test/pub/test",
  data:JSON.stringify({
    a:1,
    b:"2"
  }),
  success:function(data){
    console.log("data", data);
  }
})
```

带token的示例

```js
$.ajax({
  type: 'POST',
  url: "https://xxxxxx.com/http/router/template/test/pub/test",
  data:JSON.stringify({
    uni_id_token:"用户token",
    a:1,
    b:"2"
  }),
  success:function(data){
    console.log("data", data);
  }
})

```


